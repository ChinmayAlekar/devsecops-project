version: '3.8' 

services: 
  web: 
    build:
      context: ./app
      dockerfile: Dockerfile
    container_name: devsecops-app
    ports: 
      - "3000:3000"
    environment: 
      - FLASK_ENV=production 
    restart: unless-stopped 
    networks: 
      - app-network 
    healthcheck: 
      test: ["CMD", "curl", "-f", "http://localhost:3000/health"]
      interval: 30s 
      timeout: 10s 
      retries: 3 
      start_period: 40s 

networks: 
  app-network: 
    driver: bridge
